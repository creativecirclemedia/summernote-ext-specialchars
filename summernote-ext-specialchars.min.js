(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof module==="object"&&module.exports){module.exports=a(require("jquery"))}else{a(window.jQuery)}}}(function(a){a.extend(a.summernote.plugins,{specialchars:function(e){var n=this;var k=a.summernote.ui;var d=e.layoutInfo.editor;var o=e.options;var f=o.langInfo;var h={UP:38,DOWN:40,LEFT:37,RIGHT:39,ENTER:13};var j=15;var c=35;var i,m,b,g=0;var l=["&Agrave;","&Aacute;","&Acirc;","&Atilde;","&Auml;","&Aring;","&AElig;","&Ccedil;","&Egrave;","&Eacute;","&Ecirc;","&Euml;","&Igrave;","&Iacute;","&Icirc;","&Iuml;","&ETH;","&Ntilde;","&Ograve;","&Oacute;","&Ocirc;","&Otilde;","&Ouml;","&Oslash;","&Ugrave;","&Uacute;","&Ucirc;","&Uuml;","&Yacute;","&THORN;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&yacute;","&thorn;","&yuml;","&OElig;","&oelig;","&Scaron;","&scaron;","&Yuml;","&fnof;","&iquest;","&iexcl;","&acute;","&circ;","&tilde;","&lsquo;","&rsquo;","&sbquo;","&ldquo;","&rdquo;","&bdquo;","&prime;","&Prime;","&lsaquo;","&rsaquo;","&laquo;","&raquo;","&ndash;","&mdash;","&bull;","&hellip;","&cent;","&euro;","&pound;","&curren;","&yen;","&sect;","&copy;","&reg;","&trade;","&deg;","&para;","&frac14;","&frac12;","&frac34;","&times;","&divide;"];e.memo("button.specialCharacter",function(){return k.button({contents:'<i class="fa fa-font fa-flip-vertical">',tooltip:f.specialChar.specialChar,click:function(){n.show()}}).render()});this.makeSpecialCharSetTable=function(){var p=a("<table/>");a.each(l,function(q,u){var t=a("<td/>").addClass("note-specialchar-node");var r=(q%j===0)?a("<tr/>"):p.find("tr").last();var s=k.button({callback:function(v){v.html(u);v.attr("title",u);v.attr("data-value",encodeURIComponent(u));v.css({width:c,"margin-right":"2px","margin-bottom":"2px"})}}).render();t.append(s);r.append(t);if(q%j===0){p.append(r)}});g=p.find("tr").length;b=j;return p};this.initialize=function(){var q=o.dialogsInBody?a(document.body):d;var p='<div class="form-group row-fluid">'+this.makeSpecialCharSetTable()[0].outerHTML+"</div>";this.$dialog=k.dialog({title:f.specialChar.select,body:p}).render().appendTo(q)};this.show=function(){var p=e.invoke("editor.getSelectedText");e.invoke("editor.saveRange");this.showSpecialCharDialog(p).then(function(q){e.invoke("editor.restoreRange");var r=a("<span></span>").html(q)[0];if(r){e.invoke("editor.insertNode",r)}}).fail(function(){e.invoke("editor.restoreRange")})};this.showSpecialCharDialog=function(p){return a.Deferred(function(D){var x=n.$dialog;var z=x.find(".note-specialchar-node");var u=null;var w=[h.UP,h.DOWN,h.LEFT,h.RIGHT];var C=h.ENTER;function A(E){if(!E){return}E.find("button").addClass("active");u=E}function s(E){E.find("button").removeClass("active");u=null}function r(G,F){var E=null;a.each(z,function(I,K){var H=Math.ceil((I+1)/j);var J=((I+1)%j===0)?j:(I+1)%j;if(H===G&&J===F){E=K;return false}});return a(E)}function B(F){var G;var E=z.length%b;if(h.LEFT===F){if(i>1){i=i-1}else{if(m===1&&i===1){i=E;m=g}else{i=b;m=m-1}}}else{if(h.RIGHT===F){if(m===g&&E===i){i=1;m=1}else{if(i<b){i=i+1}else{i=1;m=m+1}}}else{if(h.UP===F){if(m===1&&E<i){m=g-1}else{m=m-1}}else{if(h.DOWN===F){m=m+1}}}}if(m===g&&i>E){m=1}else{if(m>g){m=1}else{if(m<1){m=g}}}G=r(m,i);if(G){s(u);A(G)}}function y(){if(!u){return}D.resolve(decodeURIComponent(u.find("button").attr("data-value")));x.modal("hide")}function v(E){E.preventDefault();var F=E.keyCode;if(F===undefined||F===null){return}if(w.indexOf(F)>-1){if(u===null){A(z.eq(0));i=1;m=1;return}B(F)}else{if(F===C){y()}}return false}s(z);if(p){for(var t=0;t<z.length;t++){var q=a(z[t]);if(q.text()===p){A(q);m=Math.ceil((t+1)/j);i=(t+1)%j}}}k.onDialogShown(n.$dialog,function(){a(document).on("keydown",v);n.$dialog.find("button").tooltip();z.on("click",function(E){E.preventDefault();D.resolve(decodeURIComponent(a(E.currentTarget).find("button").attr("data-value")));k.hideDialog(n.$dialog)})});k.onDialogHidden(n.$dialog,function(){z.off("click");n.$dialog.find("button").tooltip("destroy");a(document).off("keydown",v);if(D.state()==="pending"){D.reject()}});k.showDialog(n.$dialog)})}}})}));